# ScienceMatters Fork

Added a script for importing the data into the SQL database. Can be used with `psql -f`.

(Not recommended) Added the functionality to convert the private key CSV into SQL. After the creation, run this from the root of the directory:

```
node create-sql.js
```

---

# Token Sale Key Generation

During the token sale of modum.io, each potential investor gets assigned a unique Ethereum and Bitcoin address after signup.
This allows to easily map any investments back to the user.

Address generation works by creating a new ECDSA keypair. 
The address can be derived from the public key.
The private key allows to spend any funds sent to this address.

To minimize the risk during the token sale, these private keys are not generated by modum.io but instead are pregenerated by a third party before the actual token sale. Then the public keys are transfered to modum.io, which assigns the corresponding pay-in addresses to each investor.

During the token sale an unlikely compromise of the system would not compromise already paid-in funds. The private keys should be safely stored in an offline environment at the third party.

After the token sale is completed, the private keys are then transferred to modum.io, which can then use them to consolidate the funds.

## Building
```bash
./gradlew assembleDist
```

will generate a `tokenapp-keygeneration-1.0.zip` and `tokenapp-keygeneration-1.0.tar` in `build/distributions`

## Usage
The  tool generates an arbitrary amount of ECDSA keypairs and saves them into two files: `secret.csv` and `public.csv`.

Unpack the application and run:

```bash
unzip tokenapp-keygeneration-1.0.zip
cd tokenapp-keygeneration
./tokenapp-keygeneration -n numberOfKeypairs
``` 

Example
```bash
./tokenapp-keygeneration -n 10000

``` 


Runtime for 10'000'000 keypairs is expected to be around 2 hours on modern hardware.

## Output

The `secret.csv` contains the following fiels
* _btcPrivate_: The 32 byte private key in hex format for the bitcoin address
* _btcPublic_: The 32 byte public key in hex format for the bitcoin address
* _ethPrivate_: The 32 byte private key in hex format for the ethereum address
* _ethPublic_: The 64 byte public key in hex format for the ethereum address 

The `public.csv` contains the following fields
* _btcPublic_: The 32 byte public key in hex format for the bitcoin address
* _ethPublic_: The 64 byte public key in hex format for the ethereum address 
